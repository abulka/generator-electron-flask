# generator-electron-flask [![NPM version][npm-image]][npm-url] [![Build Status][travis-image]][travis-url] [![Dependency Status][daviddm-image]][daviddm-url]
> Create an Electron App project that auto-starts a Flask server the electron app can call for services.  Deployable as a single App that users can double click on and run.

## Installation

First, install [Yeoman](http://yeoman.io) and generator-electron-flask using [npm](https://www.npmjs.com/) (we assume you have pre-installed [node.js](https://nodejs.org/)).

```bash
npm install -g yo
npm install -g generator-electron-flask
```

or from GitHub

```bash
$ git clone https://github.com/abulka/generator-electron-flask
$ cd generator-electron-flask
$ npm install
$ npm link
```

Then generate your new project:

```bash
yo electron-flask
```

## Scripts in `./bin`

In order to use these handy scripts, please put `./bin` in your PATH to run these handy scripts e.g. edit your `~/.bashrc` and add:

    export PATH="./bin:$PATH"

Explanation of scripts.  

- Flask 'exe' refers to the executable file generated by PyInstaller which on Linux/Mac systems don't have the `.exe` file extension. 
- Election 'exe' refers to the final executable Electron based app, which can be distributed to users.

> These scripts assume that a local Python exists in the `./venv` directory root of your generated project. This Yoeman generator would have created that for you.

**Script**|**Description**
:-----:|:-----:
run| does everything, installs dependencies, builds both the flask and electron executables, and runs the final electron based app
build| builds the flask exe and electron exe
buildelectron-exe| build the electron exe
buildflask-exe| builds the flask exe using Pyinstaller
install-deps| install python and node dependencies
runelectron| runs the electron based app in development mode using `npm start`. Flask is also started in development mode via the electron main process spawning it.
runelectron-exe| runs the final electron based app
runflask| Run flask in development mode using `python src-flask-server/app.py`
runflask-exe| run the flask executable that was built by Pyinstaller.
runflask-exe-inside-electron| run the flask executable which has been embedded inside the electron app
whos-on-port-5000| see who is running on port 5000 which is the default flask server port - handy just in case flask is still running and wasn't killed when the electron app exited. Kill it using `kill pid` using the process id listed.

## Typical workflow

You can test the flask app independently by running `runflask`.

You can test your electron app by running `runelectron` which will automaticaly run flask in development mode, then kill flask upon exiting.

For deployment, simply run the script `build` and the resulting app will appear in e.g. `out/YOURAPP-darwin-x64/`.  Double click on it to run it.

## Architecture

Flask is spawned as a child process the the Electron app main process - see `src/index.js`.  For production, Flask is embedded inside the Electron app as an executable in its Resources directory.

The Flask executable is created by Pyinstaller. When the executable runs, the tempates and static dirs, plus the python runtime are unzipped into a temporary directory, then run.

## License

Apache-2.0 Â© [Andy Bulka]()

[npm-image]: https://badge.fury.io/js/generator-electron-flask.svg
[npm-url]: https://npmjs.org/package/generator-electron-flask
[travis-image]: https://travis-ci.com/abulka/generator-electron-flask.svg?branch=master
[travis-url]: https://travis-ci.com/abulka/generator-electron-flask
[daviddm-image]: https://david-dm.org/abulka/generator-electron-flask.svg?theme=shields.io
[daviddm-url]: https://david-dm.org/abulka/generator-electron-flask

# TODO

Dot files are tough, but .gitignore is especially tough, and I've used this syntax to get over this issue:

```js
this.fs.copyTpl(
      `${this.templatePath()}/**/.!(gitignore)*`,
      this.destinationRoot(),
      this.props
    );

    this.fs.copyTpl(
      this.templatePath('.gitignorefile'),
      this.destinationPath(`.gitignore`),
      this.props
    );
```
